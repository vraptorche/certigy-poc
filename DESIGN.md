# Certigy Design with POC

## Design

### Summary

Certigy is a certificate register solution for Issuing Body - a party that is responsible for green certificates issuing.`

Proposed design is based on microservice archetecture.

List of proposed microservices is given below.

#### Microservices

* Accounts
  Management of account holders:

  * Account registration
  * Account lifecycle
  * User Management

  Account requisites:

  * Organization name
  * Adnin user (optionally further users)
  * Production devices
  * Certificates
  * Account status
* Certificates
  Certifies production devices.
  Certificate management. Supports certificate lifecycle:

  * Issue
  * Transfer
  * Cancel
  * Withdrawal

    Certificate requisites:
*
* Devices:
  Provides intreface with production devices:

  * Collect metered data.

    Production device requisites:

    * Device location (GPS coordinates, Location name and/or decription)
    * Device parameters (e.g. Nominal power, fuel type)
    * Ownership
    * Meteding point identifier
    * Licenses
* Invoices

  * Settlement of fees
  * Billing (not supported in current version)
* Transactions
  Certificate transaction management
* Gateway
*

##### Accounts

Registration of Account holders

User management (basic, provides admin users)

##### Certificates (Certificate register)

Registry enables trading and handling of different types of certificates

* Electricity
* Gas
* Heating
* Cooling

Trading of certificates is saparate from energy trading.

* Production device(s)
* Certificate status
  * Active
  * Cancelled
  * Redeemed
* Validity dates (issuance date, expiration date)
* Cerificate owner (Account Holder)

History of actions with certificate - not part of the certificate
Transfer of certificates

Export of certificates
Import of certificates

Format for import/export needs ro be defined (Schema: XML,JSON ?)

##### Devices

Receiving of meterred data from production devices.
Setup of flexible production periods (hours,days,weeks,months) , default period is part of configuration
Setup of percentages of used fuels - for single fuel devices defaults to 100%
Single fuel production devices
Multi fuel production devices

##### Invoices

Preparation of invoicing data based on configured annual membership fees and fees per transaction volumes - both fees part of configuration

##### Transactions

All transaction can be scheduled for execution at later time, or epriodically

##### Gateway

Routes all requests from outside
Deals with authentication and autorization (perimeter security)

## POC

### Summary

To faciliate design process and verify dsign desisions, a POC project is provided as playground and/or development base.

#### Modules

Modules list

* certigy-poc-common
  Contains commom data types used across all microservices
* certigy-poc-core
* Contains core functionality shared between microservices.
* certigy-poc-accounts
  Contains Accounts microservice
  [Accounts API](certigy-poc-accounts/src/main/resources/apidocs/openapi.yaml)
* certigy-poc-certificates
  [Certificates API](certigy-poc-certificates/src/main/resources/apidocs/openapi.yaml)
* certigy-poc-config
  Contains configuration data for all microservices
* certigy-poc-devices
  Contains Devices microservice
  [Devices API](certigy-poc-devices/src/main/resources/apidocs/openapi.yaml)
* certigy-poc-gateway
  Contains Gateway microservice
* certigy-poc-invoices
  Contains Invoices microservice

  [Invoices API](certigy-poc-invoices/src/main/resources/apidocs/openapi.yaml)
* certigy-poc-transactions
  Contains Transactions microservice
  [Transactions API](ertigy-poc-transactions/src/main/resources/apidocs/openapi.yaml)

API documentation is generated by modules and is located in each module at location
